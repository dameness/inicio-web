<html>
    <!--Implemente uma nova operação matemática na calculadora utilizando
        a linguagem JavaScript e a biblioteca JQuery. Ex: raiz quadrada, exponenciação, porcentagem.
    -->
  <head>
    <meta charset="utf-8" />
    <title>Formulário para Calculadora - 18º Exemplo</title>
    <script src="../js/jquery-3.5.1.min.js"></script>
    <style>
      .form {
        display:flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        margin-top: 13%;
        margin-right: 44.5%;
        margin-left:44.5%;
        background-color: rgba(42, 39, 39, 0.848);
        border-radius: 10px;

        
      }
      .formcontrol {
        margin: 5px;
      }

      .buttonclass{
        border: none;
        border-radius: 10px;
        padding: 5px;
        width: 23.5px;
    

        background-color: #a3ac92a6;
        cursor: pointer;
        }

        .buttonclass2{
        border: none;
        border-radius: 10px;
        padding: 5px;
        width:79px;
    

        background-color: #a3ac92a6;
        cursor: pointer;
        }

        .visor{
            border-radius: 8px;
            background-color: rgba(175, 48, 48, 0.307);
        }
    </style>
  </head>
  <body>
    <div class="form">
      <div class="formcontrol">
        <input class="visor" type="text" value="" id="inputTexto" style = "width:106px" readonly/>
      </div>
      <div class="formcontrol">
        <input type="button" class="buttonclass" value="7" id="btn7" />
        <input type="button" class="buttonclass" value="8" id="btn8" />
        <input type="button" class="buttonclass" value="9" id="btn9" />
        <input type="button" class="buttonclass" value="+" id="btnSoma"/>
      </div>
      <div class="formcontrol">
        <input type="button" class="buttonclass" value="4" id="btn4" />
        <input type="button" class="buttonclass" value="5" id="btn5" />
        <input type="button" class="buttonclass" value="6" id="btn6" />
        <input type="button" class="buttonclass" value="-" id="btnSubtracao"/>
      </div>

      <div class="formcontrol">
        <input type="button" class="buttonclass" value="1" id="btn1" />
        <input type="button" class="buttonclass" value="2" id="btn2" />
        <input type="button" class="buttonclass" value="3" id="btn3" />
        <input type="button" class="buttonclass" value="/" id="btnDivisao"/>
      </div>
      
      <div class="formcontrol">
        <input type="button" class="buttonclass" value="0" id="btn0" />
        <input type="button" class="buttonclass" value="." id="btnFloat"/>
        <input type="button" class="buttonclass" value="C" id="btnReset" style="padding-left:7px;" />
        <input type="button" class="buttonclass" value="*" id="btnMultiplicacao" />
      </div>
    

      <div class="formcontrol">
        <input type="button" class="buttonclass" value="√" id="btnSqrt" />
        <input type="button" class="buttonclass2" value="=" id="btnIgual" />
      </div>
    </div>
  </body>
  <script type="text/javascript">
     $("#btnFloat").click(function () {
      //documentação sobre o método getElementById: https://www.w3schools.com/jsref/met_document_getelementbyid.asp
      var texto = document.getElementById("inputTexto").value;

      //concatena o caracter 8 na variavel
      texto = texto + ".";

      //atualiza o input
      document.getElementById("inputTexto").value = texto;
    });
     $("#btn0").click(function () {
      //documentação sobre o método getElementById: https://www.w3schools.com/jsref/met_document_getelementbyid.asp
      var texto = document.getElementById("inputTexto").value;

      //concatena o caracter 8 na variavel
      texto = texto + "0";

      //atualiza o input
      document.getElementById("inputTexto").value = texto;
    });

    $("#btn1").click(function () {
      //documentação sobre o método getElementById: https://www.w3schools.com/jsref/met_document_getelementbyid.asp
      var texto = document.getElementById("inputTexto").value;

      //concatena o caracter 8 na variavel
      texto = texto + "1";

      //atualiza o input
      document.getElementById("inputTexto").value = texto;
    });

    $("#btn2").click(function () {
      //documentação sobre o método getElementById: https://www.w3schools.com/jsref/met_document_getelementbyid.asp
      var texto = document.getElementById("inputTexto").value;

      //concatena o caracter 8 na variavel
      texto = texto + "2";

      //atualiza o input
      document.getElementById("inputTexto").value = texto;
    });

    $("#btn3").click(function () {
      //documentação sobre o método getElementById: https://www.w3schools.com/jsref/met_document_getelementbyid.asp
      var texto = document.getElementById("inputTexto").value;

      //concatena o caracter 8 na variavel
      texto = texto + "3";

      //atualiza o input
      document.getElementById("inputTexto").value = texto;
    });

    $("#btn4").click(function () {
      //documentação sobre o método getElementById: https://www.w3schools.com/jsref/met_document_getelementbyid.asp
      var texto = document.getElementById("inputTexto").value;

      //concatena o caracter 8 na variavel
      texto = texto + "4";

      //atualiza o input
      document.getElementById("inputTexto").value = texto;
    });

    $("#btn5").click(function () {
      //documentação sobre o método getElementById: https://www.w3schools.com/jsref/met_document_getelementbyid.asp
      var texto = document.getElementById("inputTexto").value;

      //concatena o caracter 8 na variavel
      texto = texto + "5";

      //atualiza o input
      document.getElementById("inputTexto").value = texto;
    });
    //Jquery permite para executar uma function após o click em um botão:
    $("#btn6").click(function () {
      //documentação sobre o método getElementById: https://www.w3schools.com/jsref/met_document_getelementbyid.asp
      var texto = document.getElementById("inputTexto").value;

      texto = texto + "6";

      document.getElementById("inputTexto").value = texto;
    });

    $("#btn7").click(function () {
      //documentação sobre o método getElementById: https://www.w3schools.com/jsref/met_document_getelementbyid.asp
      var texto = document.getElementById("inputTexto").value;

      //concatena o caracter 7 na variavel
      texto = texto + "7";

      //atualiza o input
      document.getElementById("inputTexto").value = texto;
    });

    $("#btn8").click(function () {
      //documentação sobre o método getElementById: https://www.w3schools.com/jsref/met_document_getelementbyid.asp
      var texto = document.getElementById("inputTexto").value;

      //concatena o caracter 8 na variavel
      texto = texto + "8";

      //atualiza o input
      document.getElementById("inputTexto").value = texto;
    });

    $("#btn9").click(function () {
      //documentação sobre o método getElementById: https://www.w3schools.com/jsref/met_document_getelementbyid.asp
      var texto = document.getElementById("inputTexto").value;

      //concatena o caracter 8 na variavel
      texto = texto + "9";

      //atualiza o input
      document.getElementById("inputTexto").value = texto;
    });

    $("#btnSoma").click(function () {
      //documentação sobre o método getElementById: https://www.w3schools.com/jsref/met_document_getelementbyid.asp
      var texto = document.getElementById("inputTexto").value;

      //concatena o caracter 7 na variavel
      texto = texto + "+";

      //atualiza o input
      document.getElementById("inputTexto").value = texto;
    });

    $("#btnSubtracao").click(function () {
      //documentação sobre o método getElementById: https://www.w3schools.com/jsref/met_document_getelementbyid.asp
      var texto = document.getElementById("inputTexto").value;

      //concatena o caracter 7 na variavel
      texto = texto + "-";

      //atualiza o input
      document.getElementById("inputTexto").value = texto;
    });

    $("#btnMultiplicacao").click(function () {
      //documentação sobre o método getElementById: https://www.w3schools.com/jsref/met_document_getelementbyid.asp
      var texto = document.getElementById("inputTexto").value;

      //concatena o caracter 7 na variavel
      texto = texto + "*";

      //atualiza o input
      document.getElementById("inputTexto").value = texto;
    });

    $("#btnDivisao").click(function () {
      //documentação sobre o método getElementById: https://www.w3schools.com/jsref/met_document_getelementbyid.asp
      var texto = document.getElementById("inputTexto").value;

      //concatena o caracter 7 na variavel
      texto = texto + "/";

      //atualiza o input
      document.getElementById("inputTexto").value = texto;
    });

    $("#btnSqrt").click(function () {
      //documentação sobre o método getElementById: https://www.w3schools.com/jsref/met_document_getelementbyid.asp
      var texto = document.getElementById("inputTexto").value;

      //concatena o caracter 7 na variavel
      texto = texto + "√";

      //atualiza o input
      document.getElementById("inputTexto").value = texto;
    });

    $("#btnReset").click(function () {
      //documentação sobre o método getElementById: https://www.w3schools.com/jsref/met_document_getelementbyid.asp
      document.getElementById("inputTexto").value = "";
    });

    $("#btnIgual").click(function () {
      //documentação sobre o método getElementById: https://www.w3schools.com/jsref/met_document_getelementbyid.asp
      var texto = document.getElementById("inputTexto").value;

      //se a variavel texto contiver o caracter + o método indexOf irá retornar o indice desse caracter
      //documentacao sobre o metodo indexOF : https://developer.mozilla.org/pt-BR/docs/Web/JavaScript/Reference/Global_Objects/String/indexOf
      if (texto.indexOf("+") > -1) {
        //documentacao sobre o método substring: https://developer.mozilla.org/pt-BR/docs/Web/JavaScript/Reference/Global_Objects/String/substring
        //substring: retorna uma nova string a partir de um ponto inicial e final.
        var p1 = texto.substring(0, texto.indexOf("+"));
        p1 = parseFloat(p1);

        var p2 = texto.substring(texto.indexOf("+") + 1, texto.length);
        p2 = parseFloat(p2);

        if (isNaN(p1) || isNaN(p2)) {
          alert("Operadores inválidos !!");
          document.getElementById("inputTexto").value = "";
        } else {
          //atualiza o input
          document.getElementById("inputTexto").value = p1 + p2;
        }
      } else if (texto.indexOf("-") > -1) {
        
        var p1 = texto.substring(0, texto.indexOf("-"));
        p1 = parseFloat(p1);

        var p2 = texto.substring(texto.indexOf("-") + 1, texto.length);
        p2 = parseFloat(p2);

        if (isNaN(p1) || isNaN(p2)) {
          alert("Operadores inválidos !!");
          document.getElementById("inputTexto").value = "";
        } else {
          //atualiza o input
          document.getElementById("inputTexto").value = p1 - p2;
        }
      } else if (texto.indexOf("*") > -1) {

        var p1 = texto.substring(0, texto.indexOf("*"));
        p1 = parseFloat(p1);

        var p2 = texto.substring(texto.indexOf("*") + 1, texto.length);
        p2 = parseFloat(p2);

        if (isNaN(p1) || isNaN(p2)) {
          alert("Operadores inválidos !!");
          document.getElementById("inputTexto").value = "";

        } else {
          //atualiza o input
          document.getElementById("inputTexto").value = p1 * p2;
        }

      } else if (texto.indexOf("/") > -1) {

        var p1 = texto.substring(0, texto.indexOf("/"));
        p1 = parseFloat(p1);

        var p2 = texto.substring(texto.indexOf("/") + 1, texto.length);
        p2 = parseFloat(p2);

        if (isNaN(p1) || isNaN(p2)) {
          alert("Operadores inválidos !!");
          document.getElementById("inputTexto").value = "";
        } else {
          //atualiza o input
          document.getElementById("inputTexto").value = p1 / p2;
        }

    } else if (texto.indexOf("√") > -1) {

        var p2 = texto.substring(texto.indexOf("√") + 1, texto.length);
        p2 = parseFloat(p2);

        if (isNaN(p2)) {
        alert("Operador inválido !!");
        document.getElementById("inputTexto").value = "";
        } else {
        //atualiza o input
        document.getElementById("inputTexto").value = Math.sqrt(p2);
        }

      } else {
        alert("Operação inválida!");
        document.getElementById("inputTexto").value = "";
      }
    });
  </script>


</html>